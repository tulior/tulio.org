---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.svelte';

const description = "Discover insightful articles and deep dives into backend development, cloud integrations, and modern web technologies by Túlio Ribeiro dos Anjos.";

const allPosts = Object.values(import.meta.glob('./blog/*.md', { eager: true }));
const blogPosts = allPosts
  .sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date));
---
<BaseLayout title="Túlio Ribeiro dos Anjos | Blog" description={description}>
    <Navbar client:load />

    <main class="pt-24 max-w-6xl mx-auto px-6 py-16 space-y-20">
        <h1 class="text-4xl font-bold text-[var(--color-primary)] mb-8">Latest Posts</h1>
        <div class="space-y-8">
            {blogPosts.length === 0 ? (
              <p class="text-xl text-[var(--color-text-secondary)]">No posts yet. Check back soon!</p>
            ) : (
              blogPosts.map(post => (
                <article class="pb-6">
                    <h2 class="text-2xl font-semibold mb-2">
                        <a
                          href={post.url}
                          class="text-[var(--color-primary)] hover:text-[var(--color-primary-hover)] transition-colors"
                        >
                            {post.frontmatter.title}
                        </a>
                    </h2>
                    <time class="text-sm text-[var(--color-text-secondary)] block mb-2">
                        {new Date(post.frontmatter.date).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            timeZone: 'UTC'
                        })}
                    </time>
                    <p class="text-[var(--color-text-secondary)]">
                        {post.frontmatter.description}
                    </p>
                </article>
              ))
            )}
        </div>
    </main>
</BaseLayout>